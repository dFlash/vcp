(function(){function e(d,c){window.XMLHttpRequest.prototype[d]=c(window.XMLHttpRequest.prototype[d])}function h(d,c,b){try{Object.defineProperty(d,c,{get:b})}catch(g){}}window.FileAPI||(window.FileAPI={});if(!window.XMLHttpRequest)throw"AJAX is not supported. XMLHttpRequest is not defined.";FileAPI.shouldLoad=!window.FormData||FileAPI.forceLoad;if(FileAPI.shouldLoad){var k=function(d){if(!d.__listeners){d.upload||(d.upload={});d.__listeners=[];var c=d.upload.addEventListener;d.upload.addEventListener=
function(b,g){d.__listeners[b]=g;c&&c.apply(this,arguments)}}};e("open",function(d){return function(c,b,g){k(this);this.__url=b;try{d.apply(this,[c,b,g])}catch(a){-1<a.message.indexOf("Access is denied")&&(this.__origError=a,d.apply(this,[c,"_fix_for_ie_crossdomain__",g]))}}});e("getResponseHeader",function(d){return function(c){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(c):null==d?null:d.apply(this,[c])}});e("getAllResponseHeaders",function(d){return function(){return this.__fileApiXHR&&
this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==d?null:d.apply(this)}});e("abort",function(d){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==d?null:d.apply(this)}});e("setRequestHeader",function(d){return function(c,b){if("__setXHR_"===c){k(this);var g=b(this);g instanceof Function&&g(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[c]=b,d.apply(this,arguments)}});e("send",
function(d){return function(){var c=this;if(arguments[0]&&arguments[0].__isFileAPIShim){for(var b=arguments[0],g={url:c.__url,jsonp:!1,cache:!0,complete:function(a,b){a&&angular.isString(a)&&-1!==a.indexOf("#2174")&&(a=null);c.__completed=!0;!a&&c.__listeners.load&&c.__listeners.load({type:"load",loaded:c.__loaded,total:c.__total,target:c,lengthComputable:!0});!a&&c.__listeners.loadend&&c.__listeners.loadend({type:"loadend",loaded:c.__loaded,total:c.__total,target:c,lengthComputable:!0});"abort"===
a&&c.__listeners.abort&&c.__listeners.abort({type:"abort",loaded:c.__loaded,total:c.__total,target:c,lengthComputable:!0});void 0!==b.status&&h(c,"status",function(){return 0===b.status&&a&&"abort"!==a?500:b.status});void 0!==b.statusText&&h(c,"statusText",function(){return b.statusText});h(c,"readyState",function(){return 4});void 0!==b.response&&h(c,"response",function(){return b.response});var f=b.responseText||(a&&0===b.status&&"abort"!==a?a:void 0);h(c,"responseText",function(){return f});h(c,
"response",function(){return f});a&&h(c,"err",function(){return a});c.__fileApiXHR=b;if(c.onreadystatechange)c.onreadystatechange();if(c.onload)c.onload()},progress:function(a){a.target=c;c.__listeners.progress&&c.__listeners.progress(a);c.__total=a.total;c.__loaded=a.loaded;if(a.total===a.loaded){var b=this;setTimeout(function(){c.__completed||(c.getAllResponseHeaders=function(){},b.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1E4)}},headers:c.__requestHeaders,
data:{},files:{}},a=0;a<b.data.length;a++){var f=b.data[a];null!=f.val&&null!=f.val.name&&null!=f.val.size&&null!=f.val.type?g.files[f.key]=f.val:g.data[f.key]=f.val}setTimeout(function(){if(!FileAPI.hasFlash)throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';c.__fileApiXHR=FileAPI.upload(g)},1)}else{if(this.__origError)throw this.__origError;d.apply(c,arguments)}}});window.XMLHttpRequest.__isFileAPIShim=!0;window.FormData=FormData=function(){return{append:function(d,
c,b){c.__isFileAPIBlobShim&&(c=c.data[0]);this.data.push({key:d,val:c,name:b})},data:[],__isFileAPIShim:!0}};window.Blob=Blob=function(d){return{data:d,__isFileAPIBlobShim:!0}}}})();
(function(){function e(a){return"input"===a[0].tagName.toLowerCase()&&a.attr("type")&&"file"===a.attr("type").toLowerCase()}function h(){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return!0}catch(a){if(void 0!==navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1}function k(a){var b=0,c=0;if(window.jQuery)return jQuery(a).offset();if(a.offsetParent){do b+=a.offsetLeft-a.scrollLeft,c+=a.offsetTop-a.scrollTop,a=a.offsetParent;while(a)}return{left:b,top:c}}if(FileAPI.shouldLoad){FileAPI.hasFlash=
h();FileAPI.forceLoad&&(FileAPI.html5=!1);if(!FileAPI.upload){var d,c,b=document.createElement("script"),g=document.getElementsByTagName("script"),a,f,n;if(window.FileAPI.jsUrl)d=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)c=window.FileAPI.jsPath;else for(a=0;a<g.length;a++)if(n=g[a].src,f=n.search(/\/ng\-file\-upload[\-a-zA-z0-9\.]*\.js/),-1<f){c=n.substring(0,f+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=c);b.setAttribute("src",d||c+"FileAPI.min.js");document.getElementsByTagName("head")[0].appendChild(b)}FileAPI.ngfFixIE=
function(a,b,c){if(!h())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';a.bind("mouseenter",function(){var n=b.parent();a.attr("disabled")?n&&n.removeClass("js-fileapi-wrapper"):(b.attr("__ngf_flash_")||(b.unbind("change"),b.unbind("click"),b.bind("change",function(a){f.apply(this,[a]);c.apply(this,[a])}),b.attr("__ngf_flash_","true")),n.addClass("js-fileapi-wrapper"),e(a)||(n.css("position","absolute").css("top",k(a[0]).top+"px").css("left",k(a[0]).left+"px").css("width",
a[0].offsetWidth+"px").css("height",a[0].offsetHeight+"px").css("filter","alpha(opacity\x3d0)").css("display",a.css("display")).css("overflow","hidden").css("z-index","900000").css("visibility","visible"),b.css("width",a[0].offsetWidth+"px").css("height",a[0].offsetHeight+"px").css("position","absolute").css("top","0px").css("left","0px")))});var f=function(a){for(var b=FileAPI.getFiles(a),c=0;c<b.length;c++)void 0===b[c].size&&(b[c].size=0),void 0===b[c].name&&(b[c].name="file"),void 0===b[c].type&&
(b[c].type="undefined");a.target||(a.target={});a.target.files=b;a.target.files!==b&&(a.__files_=b);(a.__files_||a.target.files).item=function(b){return(a.__files_||a.target.files)[b]||null}}};FileAPI.disableFileInput=function(a,b){b?a.removeClass("js-fileapi-wrapper"):a.addClass("js-fileapi-wrapper")}}})();
window.FileReader||(window.FileReader=function(){var e=this,h=!1;this.listeners={};this.addEventListener=function(c,b){e.listeners[c]=e.listeners[c]||[];e.listeners[c].push(b)};this.removeEventListener=function(c,b){e.listeners[c]&&e.listeners[c].splice(e.listeners[c].indexOf(b),1)};this.dispatchEvent=function(c){var b=e.listeners[c.type];if(b)for(var g=0;g<b.length;g++)b[g].call(e,c)};this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var k=function(c,b){var g=
{type:c,target:e,loaded:b.loaded,total:b.total,error:b.error};null!=b.result&&(g.target.result=b.result);return g},d=function(c){if(!h&&(h=!0,e.onloadstart))e.onloadstart(k("loadstart",c));if("load"===c.type){if(e.onloadend)e.onloadend(k("loadend",c));c=k("load",c);if(e.onload)e.onload(c)}else if("progress"===c.type){if(c=k("progress",c),e.onprogress)e.onprogress(c)}else if(c=k("error",c),e.onerror)e.onerror(c);e.dispatchEvent(c)};this.readAsDataURL=function(c){FileAPI.readAsDataURL(c,d)};this.readAsText=
function(c){FileAPI.readAsText(c,d)}});!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(e){return function(h,k){if("__setXHR_"===h){var d=k(this);d instanceof Function&&d(this)}else e.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="12.0.4";
ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(e,h,k){function d(a){function c(a){p.notify&&p.notify(a);m.progressFunc&&k(function(){m.progressFunc(a)})}function n(b){return null!=a._start&&g?{loaded:b.loaded+a._start,total:a._file&&a._file.size||b.total,type:b.type,config:a,lengthComputable:!0,target:b.target}:b}function q(){e(a).then(function(n){g&&a._chunkSize&&!a._finished&&a._file?(c({loaded:a._end,total:a._file&&a._file.size,config:a,type:"progress"}),b.upload(a,!0)):(a._finished&&
delete a._finished,p.resolve(n))},function(a){p.reject(a)},function(a){p.notify(a)})}a.method=a.method||"POST";a.headers=a.headers||{};var p=a._deferred=a._deferred||h.defer(),m=p.promise;a.disableProgress||(a.headers.__setXHR_=function(){return function(b){b&&b.upload&&b.upload.addEventListener&&(a.__XHR=b,a.xhrFn&&a.xhrFn(b),b.upload.addEventListener("progress",function(b){b.config=a;c(n(b))},!1),b.upload.addEventListener("load",function(b){b.lengthComputable&&(b.config=a,c(n(b)))},!1))}});g?a._chunkSize&&
a._end&&!a._finished?(a._start=a._end,a._end+=a._chunkSize,q()):a.resumeSizeUrl?e.get(a.resumeSizeUrl).then(function(b){a._start=a.resumeSizeResponseReader?a.resumeSizeResponseReader(b.data):parseInt((null==b.data.size?b.data:b.data.size).toString());a._chunkSize&&(a._end=a._start+a._chunkSize);q()},function(a){throw a;}):a.resumeSize?a.resumeSize().then(function(b){a._start=b;q()},function(a){throw a;}):(a._chunkSize&&(a._start=0,a._end=a._start+a._chunkSize),q()):q();m.success=function(b){m.then(function(c){b(c.data,
c.status,c.headers,a)});return m};m.error=function(b){m.then(null,function(c){b(c.data,c.status,c.headers,a)});return m};m.progress=function(a){m.progressFunc=a;m.then(null,null,function(b){a(b)});return m};m.abort=m.pause=function(){a.__XHR&&k(function(){a.__XHR.abort()});return m};m.xhr=function(b){a.xhrFn=function(a){return function(){a&&a.apply(m,arguments);b.apply(m,arguments)}}(a.xhrFn);return m};b.promisesCount++;m["finally"](function(){b.promisesCount--});return m}function c(a){var b={},c;
for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}var b=this;b.promisesCount=0;this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var g=this.isResumeSupported();this.isUploadInProgress=function(){return 0<b.promisesCount};this.rename=function(a,b){a.ngfName=b;return a};this.jsonBlob=function(a){null==a||angular.isString(a)||(a=JSON.stringify(a));a=new window.Blob([a],{type:"application/json"});a._ngfBlob=!0;return a};this.json=function(a){return angular.toJson(a)};
this.isFile=function(a){return null!=a&&(a instanceof window.Blob||a.flashId&&a.name&&a.size)};this.upload=function(a,f){function n(c,f,q){if(void 0!==f)if(angular.isDate(f)&&(f=f.toISOString()),angular.isString(f))c.append(q,f);else if(b.isFile(f)){if(!f._ngfBlob&&(a._file=a._file||f,null!=a._start&&g)){a._end&&a._end>=f.size&&(a._finished=!0,a._end=f.size);var d=f.slice(a._start,a._end||f.size);d.name=f.name;d.ngfName=f.ngfName;a._chunkSize&&(c.append("_chunkSize",a._chunkSize),c.append("_currentChunkSize",
a._end-a._start),c.append("_chunkNumber",Math.floor(a._start/a._chunkSize)),c.append("_totalSize",a._file.size));f=d}d=q.split(",");d[1]&&(f.ngfName=d[1].replace(/^\s+|\s+$/g,""),q=d[0]);a._fileKey=a._fileKey||q;c.append(q,f,f.ngfName||f.name)}else if(angular.isObject(f)){if(f.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+q;f.$$ngfCircularDetection=!0;try{for(d in f)if(f.hasOwnProperty(d)&&"$$ngfCircularDetection"!==
d){var e=null==a.objectKey?"[i]":a.objectKey;f.length&&-1<parseInt(d)&&(e=null==a.arrayKey?e:a.arrayKey);n(c,f[d],q+e.replace(/[ik]/g,d))}}finally{delete f.$$ngfCircularDetection}}else c.append(q,f)}function q(){a._chunkSize=b.translateScalars(a.resumeChunkSize);a._chunkSize=a._chunkSize?parseInt(a._chunkSize.toString()):null;a.headers=a.headers||{};a.headers["Content-Type"]=void 0;a.transformRequest=a.transformRequest?angular.isArray(a.transformRequest)?a.transformRequest:[a.transformRequest]:[];
a.transformRequest.push(function(b){var c=new window.FormData,f;b=b||a.fields||{};a.file&&(b.file=a.file);for(f in b)if(b.hasOwnProperty(f)){var g=b[f];a.formDataAppender?a.formDataAppender(c,f,g):n(c,g,f)}return c})}f||(a=c(a));a._isDigested||(a._isDigested=!0,q());return d(a)};this.http=function(a){a=c(a);a.transformRequest=a.transformRequest||function(a){return window.ArrayBuffer&&a instanceof window.ArrayBuffer||a instanceof window.Blob?a:e.defaults.transformRequest[0].apply(this,arguments)};
a._chunkSize=b.translateScalars(a.resumeChunkSize);a._chunkSize=a._chunkSize?parseInt(a._chunkSize.toString()):null;return d(a)};this.translateScalars=function(a){if(angular.isString(a)){if(a.search(/kb/i)===a.length-2)return parseFloat(1024*a.substring(0,a.length-2));if(a.search(/mb/i)===a.length-2)return parseFloat(1048576*a.substring(0,a.length-2));if(a.search(/gb/i)===a.length-2)return parseFloat(1073741824*a.substring(0,a.length-2));if(a.search(/b/i)===a.length-1||a.search(/s/i)===a.length-1)return parseFloat(a.substring(0,
a.length-1));if(a.search(/m/i)===a.length-1)return parseFloat(60*a.substring(0,a.length-1));if(a.search(/h/i)===a.length-1)return parseFloat(3600*a.substring(0,a.length-1))}return a};this.urlToBlob=function(a){var b=h.defer();e({url:a,method:"get",responseType:"arraybuffer"}).then(function(a){var c=new Uint8Array(a.data);a=a.headers("content-type")||"image/WebP";c=new window.Blob([c],{type:a});b.resolve(c)},function(a){b.reject(a)});return b.promise};this.setDefaults=function(a){this.defaults=a||
{}};this.defaults={};this.version=ngFileUpload.version}]);
ngFileUpload.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function(e,h,k,d,c){function b(a,b,c){var g=[f.emptyPromise()];angular.forEach(a,function(d,e){0===d.type.indexOf("image/jpeg")&&f.attrGetter("ngfFixOrientation",b,c,{$file:d})&&g.push(f.happyPromise(f.applyExifRotation(d),d).then(function(b){a.splice(e,1,b)}))});return d.all(g)}function g(b,c,g){var e=f.attrGetter("ngfResize",c,g);if(!e||!f.isResizeSupported()||!b.length)return f.emptyPromise();if(e instanceof Function){var k=
d.defer();e(b).then(function(f){a(f,b,c,g).then(function(a){k.resolve(a)},function(a){k.reject(a)})},function(a){k.reject(a)})}else return a(e,b,c,g)}function a(a,b,c,g){function e(d,l){if(0===d.type.indexOf("image")&&(!a.pattern||f.validatePattern(d,a.pattern))){var h=f.resize(d,a.width,a.height,a.quality,a.type,a.ratio,a.centerCrop,function(a,b){return f.attrGetter("ngfResizeIf",c,g,{$width:a,$height:b,$file:d})},!1!==a.restoreExif);k.push(h);h.then(function(a){b.splice(l,1,a)},function(a){d.$error=
"resize";d.$errorParam=(a?(a.message?a.message:a)+": ":"")+(d&&d.name)})}}for(var k=[f.emptyPromise()],h=0;h<b.length;h++)e(b[h],h);return d.all(k)}var f=c;f.getAttrWithDefaults=function(a,b){if(null!=a[b])return a[b];var c=f.defaults[b];return null==c?c:angular.isString(c)?c:JSON.stringify(c)};f.attrGetter=function(a,b,c,f){b=this.getAttrWithDefaults(b,a);if(c)try{return f?e(b)(c,f):e(b)(c)}catch(g){if(a.search(/min|max|pattern/i))return b;throw g;}else return b};f.shouldUpdateOn=function(a,b,c){return(b=
f.attrGetter("ngModelOptions",b,c))&&b.updateOn?-1<b.updateOn.split(" ").indexOf(a):!0};f.emptyPromise=function(){var a=d.defer(),b=arguments;h(function(){a.resolve.apply(a,b)});return a.promise};f.rejectPromise=function(){var a=d.defer(),b=arguments;h(function(){a.reject.apply(a,b)});return a.promise};f.happyPromise=function(a,b){var c=d.defer();a.then(function(a){c.resolve(a)},function(a){h(function(){throw a;});c.resolve(b)});return c.promise};f.updateModel=function(a,c,d,k,l,w,t){function A(b,
g,x,l,A){c.$$ngfPrevValidFiles=b;c.$$ngfPrevInvalidFiles=g;var B=b&&b.length?b[0]:null,D=g&&g.length?g[0]:null;a&&(f.applyModelValidation(a,b),a.$setViewValue(A?B:b));k&&e(k)(d,{$files:b,$file:B,$newFiles:x,$duplicateFiles:l,$invalidFiles:g,$invalidFile:D,$event:w});var y=f.attrGetter("ngfModelInvalid",c);y&&h(function(){e(y).assign(d,A?D:g)});h(function(){})}function y(){function a(b,c){return b.name===c.name&&(b.$ngfOrigSize||b.size)===(c.$ngfOrigSize||c.size)&&b.type===c.type}function b(c){var f;
for(f=0;f<x.length;f++)if(a(c,x[f]))return!0;for(f=0;f<B.length;f++)if(a(c,B[f]))return!0;return!1}if(l){v=[];r=[];for(var c=0;c<l.length;c++)b(l[c])?r.push(l[c]):v.push(l[c])}}function u(a){return angular.isArray(a)?a:[a]}function C(){s=[];E=[];angular.forEach(v,function(a){a.$error?E.push(a):s.push(a)})}function z(){function b(){h(function(){A(D?x.concat(s):s,D?B.concat(E):E,l,r,H)},F&&F.debounce?F.debounce.change||F.debounce:0)}g(G?v:s,c,d).then(function(){G?f.validate(v,x.length,a,c,d).then(function(){C();
b()}):b()},function(a){throw"Could not resize files "+a;})}var v,r=[],x,B,E=[],s=[];x=c.$$ngfPrevValidFiles||[];B=c.$$ngfPrevInvalidFiles||[];a&&a.$modelValue&&(x=u(a.$modelValue));var D=f.attrGetter("ngfKeep",c,d);v=(l||[]).slice(0);"distinct"!==D&&!0!==f.attrGetter("ngfKeepDistinct",c,d)||y(c,d);var H=!D&&!f.attrGetter("ngfMultiple",c,d)&&!f.attrGetter("multiple",c);if(!D||v.length){f.attrGetter("ngfBeforeModelChange",c,d,{$files:l,$file:l&&l.length?l[0]:null,$newFiles:v,$duplicateFiles:r,$event:w});
var G=f.attrGetter("ngfValidateAfterResize",c,d),F=f.attrGetter("ngModelOptions",c,d);f.validate(v,x.length,a,c,d).then(function(){t?A(v,[],l,r,H):(F&&F.allowInvalid||G?s=v:C(),f.attrGetter("ngfFixOrientation",c,d)&&f.isExifSupported()?b(s,c,d).then(function(){z()}):z())})}};return f}]);
ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(e,h,k,d){function c(a){var b=a.match(/Android[^\d]*(\d+)\.(\d+)/);return b&&2<b.length?(a=d.defaults.androidFixMinorVersion||4,4>parseInt(b[1])||parseInt(b[1])===a&&parseInt(b[2])<a):-1===a.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(a)}function b(a,b,d,e,k,m,l,h){function t(){return"input"===b[0].tagName.toLowerCase()&&d.type&&"file"===d.type.toLowerCase()}function A(){return x("ngfChange")||x("ngfSelect")}function y(b){if(h.shouldUpdateOn("change",
d,a)){for(var c=b.__files_||b.target&&b.target.files,f=[],g=0;g<c.length;g++)f.push(c[g]);h.updateModel(e,d,a,A(),f.length?f:null,b)}}function u(){if(t())return b;var a=angular.element('\x3cinput type\x3d"file"\x3e');if(b!==a)for(var c=0;c<b[0].attributes.length;c++){var d=b[0].attributes[c];if("type"!==d.name&&"class"!==d.name&&"style"!==d.name){if(null==d.value||""===d.value)"required"===d.name&&(d.value="required"),"multiple"===d.name&&(d.value="multiple");a.attr(d.name,"id"===d.name?"ngf-"+d.value:
d.value)}}c=angular.element("\x3clabel\x3eupload\x3c/label\x3e");c.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1");g.push({el:b,ref:c});document.body.appendChild(c.append(a)[0]);return a}function C(d){if(b.attr("disabled"))return!1;if(!x("ngfSelectDisabled",a)){var e=z(d);if(null!=e)return e;v(d);try{t()||document.body.contains(s[0])||(g.push({el:b,
ref:s.parent()}),document.body.appendChild(s.parent()[0]),s.bind("change",y))}catch(k){}c(navigator.userAgent)?setTimeout(function(){s[0].click()},0):s[0].click();return!1}}function z(a){var b=a.changedTouches||a.originalEvent&&a.originalEvent.changedTouches;if("touchstart"===a.type)return E=b?b[0].clientY:0,!0;a.stopPropagation();a.preventDefault();if("touchend"===a.type&&20<Math.abs((b?b[0].clientY:0)-E))return!1}function v(b){h.shouldUpdateOn("click",d,a)&&s.val()&&(s.val(null),h.updateModel(e,
d,a,A(),null,b,!0))}function r(a){if(s&&!s.attr("__ngf_ie10_Fix_")){if(s[0].parentNode)return a.preventDefault(),a.stopPropagation(),s.unbind("click"),a=s.clone(),s.replaceWith(a),s=a,s.attr("__ngf_ie10_Fix_","true"),s.bind("change",y),s.bind("click",r),s[0].click(),!1;s=null}else s.removeAttr("__ngf_ie10_Fix_")}var x=function(a,b){return h.attrGetter(a,d,b)};h.registerModelChangeValidator(e,d,a);var B=[];B.push(a.$watch(x("ngfMultiple"),function(){s.attr("multiple",x("ngfMultiple",a))}));B.push(a.$watch(x("ngfCapture"),
function(){s.attr("capture",x("ngfCapture",a))}));B.push(a.$watch(x("ngfAccept"),function(){s.attr("accept",x("ngfAccept",a))}));d.$observe("accept",function(){s.attr("accept",x("accept"))});B.push(function(){d.$$observers&&delete d.$$observers.accept});var E=0,s=b;t()||(s=u());s.bind("change",y);t()?b.bind("click",v):b.bind("click touchstart touchend",C);-1!==navigator.appVersion.indexOf("MSIE 10")&&s.bind("click",r);e&&e.$formatters.push(function(a){(null==a||0===a.length)&&s.val()&&s.val(null);
return a});a.$on("$destroy",function(){t()||s.parent().remove();angular.forEach(B,function(a){a()})});m(function(){for(var a=0;a<g.length;a++){var b=g[a];document.body.contains(b.el[0])||(g.splice(a,1),b.ref.remove())}});window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(b,s,y)}var g=[];return{restrict:"AEC",require:"?ngModel",link:function(a,c,g,q){b(a,c,g,q,e,h,k,d)}}}]);
(function(){function e(e){return"img"===e.tagName.toLowerCase()?"image":"audio"===e.tagName.toLowerCase()?"audio":"video"===e.tagName.toLowerCase()?"video":/./}function h(k,d,c,b,g,a,f,n){function q(a){var f=k.attrGetter("ngfNoObjectUrl",g,c);k.dataUrl(a,f)["finally"](function(){d(function(){var c=(f?a.$ngfDataUrl:a.$ngfBlobUrl)||a.$ngfDataUrl;n?b.css("background-image","url('"+(c||"")+"')"):b.attr("src",c);c?b.removeClass("ng-hide"):b.addClass("ng-hide")})})}d(function(){var d=c.$watch(g[a],function(c){var d=
f;"ngfThumbnail"===a&&(d||(d={width:b[0].clientWidth,height:b[0].clientHeight}),0===d.width&&window.getComputedStyle&&(d=getComputedStyle(b[0]),d={width:parseInt(d.width.slice(0,-2)),height:parseInt(d.height.slice(0,-2))}));if(angular.isString(c))return b.removeClass("ng-hide"),n?b.css("background-image","url('"+c+"')"):b.attr("src",c);!c||!c.type||0!==c.type.search(e(b[0]))||n&&0!==c.type.indexOf("image")?b.addClass("ng-hide"):d&&k.isResizeSupported()?k.resize(c,d.width,d.height,d.quality).then(function(a){q(a)},
function(a){throw a;}):q(c)});c.$on("$destroy",function(){d()})})}ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(e,d,c){e.base64DataUrl=function(b){if(angular.isArray(b)){var d=c.defer(),a=0;angular.forEach(b,function(c){e.dataUrl(c,!0)["finally"](function(){a++;if(a===b.length){var c=[];angular.forEach(b,function(a){c.push(a.$ngfDataUrl)});d.resolve(c,b)}})});return d.promise}return e.dataUrl(b,!0)};e.dataUrl=function(b,g){if(!b)return e.emptyPromise(b,b);if(g&&null!=
b.$ngfDataUrl||!g&&null!=b.$ngfBlobUrl)return e.emptyPromise(g?b.$ngfDataUrl:b.$ngfBlobUrl,b);var a=g?b.$$ngfDataUrlPromise:b.$$ngfBlobUrlPromise;if(a)return a;var f=c.defer();d(function(){if(window.FileReader&&b&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||2E4>b.size)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||4E6>b.size)){var a=window.URL||window.webkitURL;if(a&&a.createObjectURL&&!g){var c;try{c=a.createObjectURL(b)}catch(p){d(function(){b.$ngfBlobUrl="";f.reject()});
return}d(function(){if(b.$ngfBlobUrl=c){f.resolve(c,b);e.blobUrls=e.blobUrls||[];e.blobUrlsTotalSize=e.blobUrlsTotalSize||0;e.blobUrls.push({url:c,size:b.size});e.blobUrlsTotalSize+=b.size||0;for(var d=e.defaults.blobUrlsMaxMemory||268435456,g=e.defaults.blobUrlsMaxQueueSize||200;(e.blobUrlsTotalSize>d||e.blobUrls.length>g)&&1<e.blobUrls.length;){var p=e.blobUrls.splice(0,1)[0];a.revokeObjectURL(p.url);e.blobUrlsTotalSize-=p.size}}})}else{var m=new FileReader;m.onload=function(a){d(function(){b.$ngfDataUrl=
a.target.result;f.resolve(a.target.result,b);d(function(){delete b.$ngfDataUrl},1E3)})};m.onerror=function(){d(function(){b.$ngfDataUrl="";f.reject()})};m.readAsDataURL(b)}}else d(function(){b[g?"$ngfDataUrl":"$ngfBlobUrl"]="";f.reject()})});a=g?b.$$ngfDataUrlPromise=f.promise:b.$$ngfBlobUrlPromise=f.promise;a["finally"](function(){delete b[g?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]});return a};return e}]);ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(e,d){return{restrict:"AE",
link:function(c,b,g){h(e,d,c,b,g,"ngfSrc",e.attrGetter("ngfResize",g,c),!1)}}}]);ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(e,d){return{restrict:"AE",link:function(c,b,g){h(e,d,c,b,g,"ngfBackground",e.attrGetter("ngfResize",g,c),!0)}}}]);ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(e,d){return{restrict:"AE",link:function(c,b,g){var a=e.attrGetter("ngfSize",g,c);h(e,d,c,b,g,"ngfThumbnail",a,e.attrGetter("ngfAsBackground",g,c))}}}]);ngFileUpload.config(["$compileProvider",
function(e){e.imgSrcSanitizationWhitelist&&e.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/);e.aHrefSanitizationWhitelist&&e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/)}]);ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(e,d){return function(c,b,g){if(angular.isString(c))return d.trustAsResourceUrl(c);var a=c&&((b?c.$ngfDataUrl:c.$ngfBlobUrl)||c.$ngfDataUrl);if(c&&!a)return!c.$ngfDataUrlFilterInProgress&&angular.isObject(c)&&
(c.$ngfDataUrlFilterInProgress=!0,e.dataUrl(c,b)),"";c&&delete c.$ngfDataUrlFilterInProgress;return(c&&a?g?d.trustAsResourceUrl(a):a:c)||""}}])})();
ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(e,h,k){function d(b){var c="",a=[];if(2<b.length&&"/"===b[0]&&"/"===b[b.length-1])c=b.substring(1,b.length-1);else{var f=b.split(",");if(1<f.length)for(b=0;b<f.length;b++){var e=d(f[b]);e.regexp?(c+="("+e.regexp+")",b<f.length-1&&(c+="|")):a=a.concat(e.excludes)}else 0===b.indexOf("!")?a.push("^((?!"+d(b.substring(1)).regexp+").)*$"):(0===b.indexOf(".")&&(b="*"+b),c="^"+b.replace(RegExp("[.\\\\+*?\\[\\^\\]$(){}\x3d!\x3c\x3e|:\\-]",
"g"),"\\$\x26")+"$",c=c.replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:c,excludes:a}}function c(b,c){null==c||b.$dirty||(b.$setDirty?b.$setDirty():b.$dirty=!0)}e.validatePattern=function(b,c){if(!c)return!0;var a=d(c),f=!0;a.regexp&&a.regexp.length&&(f=new RegExp(a.regexp,"i"),f=null!=b.type&&f.test(b.type)||null!=b.name&&f.test(b.name));for(var e=a.excludes.length;e--;)var k=new RegExp(a.excludes[e],"i"),f=f&&(null==b.type||k.test(b.type))&&(null==b.name||k.test(b.name));return f};e.ratioToFloat=
function(b){b=b.toString();var c=b.search(/[x:]/i);return b=-1<c?parseFloat(b.substring(0,c))/parseFloat(b.substring(c+1)):parseFloat(b)};e.registerModelChangeValidator=function(b,c,a){b&&b.$formatters.push(function(f){b.$dirty&&(f&&!angular.isArray(f)&&(f=[f]),e.validate(f,0,b,c,a).then(function(){e.applyModelValidation(b,f)}))})};e.applyModelValidation=function(b,d){c(b,d);angular.forEach(b.$ngfValidations,function(a){b.$setValidity(a.name,a.valid)})};e.getValidationAttr=function(b,c,a,d,n){var k=
"ngf"+a[0].toUpperCase()+a.substr(1),k=e.attrGetter(k,b,c,{$file:n});null==k&&(k=e.attrGetter("ngfValidate",b,c,{$file:n}))&&(b=(d||a).split("."),k=k[b[0]],1<b.length&&(k=k&&k[b[1]]));return k};e.validate=function(b,c,a,d,n){function k(c,g,p){if(b){for(var m=b.length,h=null;m--;){var l=b[m];if(l){var q=e.getValidationAttr(d,n,c,g,l);null==q||p(l,q,m)||(l.$error=c,(l.$errorMessages=l.$errorMessages||{})[c]=!0,l.$errorParam=q,b.splice(m,1),h=!1)}}null!==h&&a.$ngfValidations.push({name:c,valid:h})}}
function p(c,g,k,p,l){function q(a,b,d){null!=d?p(b,d).then(function(f){l(f,d)?a.resolve():(b.$error=c,(b.$errorMessages=b.$errorMessages||{})[c]=!0,b.$errorParam=d,a.reject())},function(){m("ngfValidateForce",{$file:b})?(b.$error=c,(b.$errorMessages=b.$errorMessages||{})[c]=!0,b.$errorParam=d,a.reject()):a.resolve()}):a.resolve()}var w=[e.emptyPromise()];if(b)return b=void 0===b.length?[b]:b,angular.forEach(b,function(a){var b=h.defer();w.push(b.promise);!k||null!=a.type&&0===a.type.search(k)?"dimensions"===
c&&null!=e.attrGetter("ngfDimensions",d)?e.imageDimensions(a).then(function(c){q(b,a,m("ngfDimensions",{$file:a,$width:c.width,$height:c.height}))},function(){b.reject()}):"duration"===c&&null!=e.attrGetter("ngfDuration",d)?e.mediaDuration(a).then(function(c){q(b,a,m("ngfDuration",{$file:a,$duration:c}))},function(){b.reject()}):q(b,a,e.getValidationAttr(d,n,c,g,a)):b.resolve()}),h.all(w).then(function(){a.$ngfValidations.push({name:c,valid:!0})},function(){a.$ngfValidations.push({name:c,valid:!1})})}
a=a||{};a.$ngfValidations=a.$ngfValidations||[];angular.forEach(a.$ngfValidations,function(a){a.valid=!0});var m=function(a,b){return e.attrGetter(a,d,n,b)};if(null==b||0===b.length)return e.emptyPromise(a);b=void 0===b.length?[b]:b.slice(0);k("maxFiles",null,function(a,b,d){return c+d<b});k("pattern",null,e.validatePattern);k("minSize","size.min",function(a,b){return a.size+.1>=e.translateScalars(b)});k("maxSize","size.max",function(a,b){return a.size-.1<=e.translateScalars(b)});var l=0;k("maxTotalSize",
null,function(a,c){l+=a.size;return l>e.translateScalars(c)?(b.splice(0,b.length),!1):!0});k("validateFn",null,function(a,b){return!0===b||null===b||""===b});if(!b.length)return e.emptyPromise(a,a.$ngfValidations);var w=h.defer(),t=[];t.push(e.happyPromise(p("maxHeight","height.max",/image/,this.imageDimensions,function(a,b){return a.height<=b})));t.push(e.happyPromise(p("minHeight","height.min",/image/,this.imageDimensions,function(a,b){return a.height>=b})));t.push(e.happyPromise(p("maxWidth","width.max",
/image/,this.imageDimensions,function(a,b){return a.width<=b})));t.push(e.happyPromise(p("minWidth","width.min",/image/,this.imageDimensions,function(a,b){return a.width>=b})));t.push(e.happyPromise(p("dimensions",null,/image/,function(a,b){return e.emptyPromise(b)},function(a){return a})));t.push(e.happyPromise(p("ratio",null,/image/,this.imageDimensions,function(a,b){for(var c=b.toString().split(","),d=!1,f=0;f<c.length;f++)1E-4>Math.abs(a.width/a.height-e.ratioToFloat(c[f]))&&(d=!0);return d})));
t.push(e.happyPromise(p("maxRatio","ratio.max",/image/,this.imageDimensions,function(a,b){return 1E-4>a.width/a.height-e.ratioToFloat(b)})));t.push(e.happyPromise(p("minRatio","ratio.min",/image/,this.imageDimensions,function(a,b){return-1E-4<a.width/a.height-e.ratioToFloat(b)})));t.push(e.happyPromise(p("maxDuration","duration.max",/audio|video/,this.mediaDuration,function(a,b){return a<=e.translateScalars(b)})));t.push(e.happyPromise(p("minDuration","duration.min",/audio|video/,this.mediaDuration,
function(a,b){return a>=e.translateScalars(b)})));t.push(e.happyPromise(p("duration",null,/audio|video/,function(a,b){return e.emptyPromise(b)},function(a){return a})));t.push(e.happyPromise(p("validateAsyncFn",null,null,function(a,b){return b},function(a){return!0===a||null===a||""===a})));return h.all(t).then(function(){w.resolve(a,a.$ngfValidations)})};e.imageDimensions=function(b){if(b.$ngfWidth&&b.$ngfHeight){var c=h.defer();k(function(){c.resolve({width:b.$ngfWidth,height:b.$ngfHeight})});return c.promise}if(b.$ngfDimensionPromise)return b.$ngfDimensionPromise;
var a=h.defer();k(function(){0!==b.type.indexOf("image")?a.reject("not image"):e.dataUrl(b).then(function(c){function d(){var c=g[0].clientWidth,f=g[0].clientHeight;g.remove();b.$ngfWidth=c;b.$ngfHeight=f;a.resolve({width:c,height:f})}function e(){k(function(){g[0].parentNode&&(g[0].clientWidth?d():e())},1E3)}var g=angular.element("\x3cimg\x3e").attr("src",c).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");g.on("load",d);g.on("error",
function(){g.remove();a.reject("load error")});e();angular.element(document.getElementsByTagName("body")[0]).append(g)},function(){a.reject("load error")})});b.$ngfDimensionPromise=a.promise;b.$ngfDimensionPromise["finally"](function(){delete b.$ngfDimensionPromise});return b.$ngfDimensionPromise};e.mediaDuration=function(b){if(b.$ngfDuration){var c=h.defer();k(function(){c.resolve(b.$ngfDuration)});return c.promise}if(b.$ngfDurationPromise)return b.$ngfDurationPromise;var a=h.defer();k(function(){0!==
b.type.indexOf("audio")&&0!==b.type.indexOf("video")?a.reject("not media"):e.dataUrl(b).then(function(c){function d(){var c=g[0].duration;b.$ngfDuration=c;g.remove();a.resolve(c)}function e(){k(function(){g[0].parentNode&&(g[0].duration?d():e())},1E3)}var g=angular.element(0===b.type.indexOf("audio")?"\x3caudio\x3e":"\x3cvideo\x3e").attr("src",c).css("visibility","none").css("position","fixed");g.on("loadedmetadata",d);g.on("error",function(){g.remove();a.reject("load error")});e();angular.element(document.body).append(g)},
function(){a.reject("load error")})});b.$ngfDurationPromise=a.promise;b.$ngfDurationPromise["finally"](function(){delete b.$ngfDurationPromise});return b.$ngfDurationPromise};return e}]);
ngFileUpload.service("UploadResize",["UploadValidate","$q",function(e,h){var k=function(d,c,b,g,a,f,k,q){var p=h.defer(),m=document.createElement("canvas"),l=document.createElement("img");l.onload=function(){var d,h,A,y;if(null!=q&&!1===q(l.width,l.height))p.reject("resizeIf");else try{if(f){var u=e.ratioToFloat(f);l.width/l.height<u?(c=l.width,b=c/u):(b=l.height,c=b*u)}c||(c=l.width);b||(b=l.height);var C=l.width,z=l.height,u=c,v=b,r=k?Math.max(u/C,v/z):Math.min(u/C,v/z);d=C*r;h=z*r;A=C*r-u;y=z*
r-v;m.width=Math.min(d,c);m.height=Math.min(h,b);m.getContext("2d").drawImage(l,Math.min(0,-A/2),Math.min(0,-y/2),d,h);p.resolve(m.toDataURL(a||"image/WebP",g||.934))}catch(x){p.reject(x)}};l.onerror=function(){p.reject()};l.src=d;return p.promise};e.dataUrltoBlob=function(d,c,b){var e=d.split(",");d=e[0].match(/:(.*?);/)[1];for(var e=atob(e[1]),a=e.length,f=new Uint8Array(a);a--;)f[a]=e.charCodeAt(a);d=new window.Blob([f],{type:d});d.name=c;d.$ngfOrigSize=b;return d};e.isResizeSupported=function(){var d=
document.createElement("canvas");return window.atob&&d.getContext&&d.getContext("2d")&&window.Blob};e.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(d){this.$ngfName=d},configurable:!0});e.resize=function(d,c,b,g,a,f,n,q,p){if(0!==d.type.indexOf("image"))return e.emptyPromise(d);var m=h.defer();e.dataUrl(d,!0).then(function(h){k(h,c,b,g,a||d.type,f,n,q).then(function(a){if("image/jpeg"===d.type&&p)try{a=e.restoreExif(h,a)}catch(b){setTimeout(function(){throw b;
},1)}try{var c=e.dataUrltoBlob(a,d.name,d.size);m.resolve(c)}catch(f){m.reject(f)}},function(a){"resizeIf"===a&&m.resolve(d);m.reject(a)})},function(a){m.reject(a)});return m.promise};return e}]);
(function(){function e(e,d,c,b,g,a,f,n,q,p){function m(){return d.attr("disabled")||u("ngfDropDisabled",e)}function l(a,d){n.updateModel(b,c,e,u("ngfChange")||u("ngfDrop"),a,d)}function w(a,b){if(!n.shouldUpdateOn(a,c,e)||!b)return n.rejectPromise([]);var d=[];b.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,function(a,b,c){d.push(c)});var f=[],g=[];if(d.length){angular.forEach(d,function(a){f.push(n.urlToBlob(a).then(function(a){g.push(a)}))});var h=p.defer();p.all(f).then(function(){h.resolve(g)},
function(a){h.reject(a)});return h.promise}return n.emptyPromise()}function t(a,b,c,d){b=u("ngfDragOverClass",a,{$event:c});var e="dragover";if(angular.isString(b))e=b;else if(b&&(b.delay&&(v=b.delay),b.accept||b.reject)){var f=c.dataTransfer.items;if(null!=f&&f.length)for(a=b.pattern||u("ngfPattern",a,{$event:c}),c=f.length;c--;)if(n.validatePattern(f[c],a))e=b.accept;else{e=b.reject;break}else e=b.accept}d(e)}function A(a,b,d,g){function h(a,b){var c=p.defer();if(null!=a)if(a.isDirectory){var d=
[n.emptyPromise()];if(q){var e={type:"directory"};e.name=e.path=(b||"")+a.name+a.name;r.push(e)}var f=a.createReader(),g=[],k=function(){f.readEntries(function(e){try{e.length?(g=g.concat(Array.prototype.slice.call(e||[],0)),k()):(angular.forEach(g.slice(0),function(c){r.length<=m&&t<=l&&d.push(h(c,(b?b:"")+a.name+"/"))}),p.all(d).then(function(){c.resolve()},function(a){c.reject(a)}))}catch(f){c.reject(f)}},function(a){c.reject(a)})};k()}else a.file(function(a){try{a.path=(b?b:"")+a.name,q&&(a=n.rename(a,
a.path)),r.push(a),t+=a.size,c.resolve()}catch(d){c.reject(d)}},function(a){c.reject(a)});return c.promise}var m=n.getValidationAttr(c,e,"maxFiles")||Number.MAX_VALUE,l=n.getValidationAttr(c,e,"maxTotalSize")||Number.MAX_VALUE,q=u("ngfIncludeDir",e),r=[],t=0,w=[n.emptyPromise()];if(a&&0<a.length&&"file"!==f.protocol())for(b=0;b<a.length;b++){if(a[b].webkitGetAsEntry&&a[b].webkitGetAsEntry()&&a[b].webkitGetAsEntry().isDirectory){var v=a[b].webkitGetAsEntry();if(v.isDirectory&&!d)continue;null!=v&&
w.push(h(v))}else v=a[b].getAsFile(),null!=v&&(r.push(v),t+=v.size);if(r.length>m||t>l||!g&&0<r.length)break}else if(null!=b)for(a=0;a<b.length;a++){d=b.item(a);if(d.type||0<d.size)r.push(d),t+=d.size;if(r.length>m||t>l||!g&&0<r.length)break}var y=p.defer();p.all(w).then(function(){if(g||q||!r.length)y.resolve(r);else{for(var a=0;r[a]&&"directory"===r[a].type;)a++;y.resolve([r[a]])}},function(a){y.reject(a)});return y.promise}var y=h(),u=function(a,b,d){return n.attrGetter(a,c,b,d)};u("dropAvailable")&&
a(function(){e[u("dropAvailable")]?e[u("dropAvailable")].value=y:e[u("dropAvailable")]=y});if(y){null==u("ngfSelect")&&n.registerModelChangeValidator(b,c,e);var C=null,z=g(u("ngfStopPropagation")),v=1,r;d[0].addEventListener("dragover",function(b){if(!m()&&n.shouldUpdateOn("drop",c,e)){b.preventDefault();z(e)&&b.stopPropagation();if(-1<navigator.userAgent.indexOf("Chrome")){var f=b.dataTransfer.effectAllowed;b.dataTransfer.dropEffect="move"===f||"linkMove"===f?"move":"copy"}a.cancel(C);r||(r="C",
t(e,c,b,function(a){r=a;d.addClass(r);u("ngfDrag",e,{$isDragging:!0,$class:r,$event:b})}))}},!1);d[0].addEventListener("dragenter",function(a){!m()&&n.shouldUpdateOn("drop",c,e)&&(a.preventDefault(),z(e)&&a.stopPropagation())},!1);d[0].addEventListener("dragleave",function(b){!m()&&n.shouldUpdateOn("drop",c,e)&&(b.preventDefault(),z(e)&&b.stopPropagation(),C=a(function(){r&&d.removeClass(r);r=null;u("ngfDrag",e,{$isDragging:!1,$event:b})},v||100))},!1);d[0].addEventListener("drop",function(a){if(!m()&&
n.shouldUpdateOn("drop",c,e)){a.preventDefault();z(e)&&a.stopPropagation();r&&d.removeClass(r);r=null;var b=a.dataTransfer.items,f;try{f=a.dataTransfer&&a.dataTransfer.getData&&a.dataTransfer.getData("text/html")}catch(g){}A(b,a.dataTransfer.files,!1!==u("ngfAllowDir",e),u("multiple")||u("ngfMultiple",e)).then(function(b){b.length?l(b,a):w("dropUrl",f).then(function(b){l(b,a)})})}},!1);d[0].addEventListener("paste",function(a){-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&u("ngfEnableFirefoxPaste",
e)&&a.preventDefault();if(!m()&&n.shouldUpdateOn("paste",c,e)){var b=[],d=a.clipboardData||a.originalEvent.clipboardData;if(d&&d.items)for(var f=0;f<d.items.length;f++)-1!==d.items[f].type.indexOf("image")&&b.push(d.items[f].getAsFile());b.length?l(b,a):w("pasteUrl",d).then(function(b){l(b,a)})}},!1);-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&u("ngfEnableFirefoxPaste",e)&&(d.attr("contenteditable",!0),d.on("keypress",function(a){a.metaKey||a.ctrlKey||a.preventDefault()}))}else!0===u("ngfHideOnDropNotAvailable",
e)&&d.css("display","none")}function h(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e&&!/Edge\/12./i.test(navigator.userAgent)}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$location","Upload","$http","$q",function(h,d,c,b,g,a){return{restrict:"AEC",require:"?ngModel",link:function(f,n,q,p){e(f,n,q,p,h,d,c,b,g,a)}}}]);ngFileUpload.directive("ngfNoFileDrop",function(){return function(e,d){h()&&d.css("display","none")}});ngFileUpload.directive("ngfDropAvailable",
["$parse","$timeout","Upload",function(e,d,c){return function(b,g,a){if(h()){var f=e(c.attrGetter("ngfDropAvailable",a));d(function(){f(b);f.assign&&f.assign(b,!0)})}}}])})();
ngFileUpload.service("UploadExif",["UploadResize","$q",function(e,h){function k(c,b,d,a){switch(b){case 2:return c.transform(-1,0,0,1,d,0);case 3:return c.transform(-1,0,0,-1,d,a);case 4:return c.transform(1,0,0,-1,0,a);case 5:return c.transform(0,1,1,0,0,0);case 6:return c.transform(0,1,-1,0,a,0);case 7:return c.transform(0,-1,-1,0,a,d);case 8:return c.transform(0,-1,1,0,0,d)}}function d(c){var b="";c=new Uint8Array(c);for(var d=c.byteLength,a=0;a<d;a++)b+=String.fromCharCode(c[a]);return window.btoa(b)}
e.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&e.isResizeSupported()};e.readOrientation=function(c){var b=h.defer(),d=new FileReader;c=c.slice?c.slice(0,65536):c;d.readAsArrayBuffer(c);d.onerror=function(a){return b.reject(a)};d.onload=function(a){var c={orientation:1},d=new DataView(this.result);if(65496!==d.getUint16(0,!1))return b.resolve(c);for(var e=d.byteLength,g=2;g<e;){var h=d.getUint16(g,!1),g=g+2;if(65505===h){if(1165519206!==d.getUint32(g+=2,
!1))break;for(var h=18761===d.getUint16(g+=6,!1),g=g+d.getUint32(g+4,h),k=d.getUint16(g,h),g=g+2,w=0;w<k;w++)if(274===d.getUint16(g+12*w,h))return e=d.getUint16(g+12*w+8,h),2<=e&&8>=e&&(d.setUint16(g+12*w+8,1,h),c.fixedArrayBuffer=a.target.result),c.orientation=e,b.resolve(c)}else if(65280!==(h&65280))break;else g+=d.getUint16(g,!1)}return b.resolve(c)};return b.promise};e.applyExifRotation=function(c){if(0!==c.type.indexOf("image/jpeg"))return e.emptyPromise(c);var b=h.defer();e.readOrientation(c).then(function(g){if(2>
g.orientation||8<g.orientation)return b.resolve(c);e.dataUrl(c,!0).then(function(a){var f=document.createElement("canvas"),h=document.createElement("img");h.onload=function(){try{f.width=4<g.orientation?h.height:h.width;f.height=4<g.orientation?h.width:h.height;var a=f.getContext("2d");k(a,g.orientation,h.width,h.height);a.drawImage(h,0,0);var p=f.toDataURL(c.type||"image/WebP",.934),p=e.restoreExif(d(g.fixedArrayBuffer),p),m=e.dataUrltoBlob(p,c.name);b.resolve(m)}catch(l){return b.reject(l)}};h.onerror=
function(){b.reject()};h.src=a},function(a){b.reject(a)})},function(c){b.reject(c)});return b.promise};e.restoreExif=function(c,b){return{KEY_STR:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d",encode64:function(b){var a="",c,d,e="",h,k,l="",w=0;do c=b[w++],d=b[w++],e=b[w++],h=c>>2,c=(c&3)<<4|d>>4,k=(d&15)<<2|e>>6,l=e&63,isNaN(d)?k=l=64:isNaN(e)&&(l=64),a=a+this.KEY_STR.charAt(h)+this.KEY_STR.charAt(c)+this.KEY_STR.charAt(k)+this.KEY_STR.charAt(l);while(w<b.length);return a},
restore:function(b,a){b.match("data:image/jpeg;base64,")&&(b=b.replace("data:image/jpeg;base64,",""));var c=this.decode64(b),c=this.slice2Segments(c),c=this.exifManipulation(a,c);return"data:image/jpeg;base64,"+this.encode64(c)},exifManipulation:function(b,a){var c=this.getExifArray(a),c=this.insertExif(b,c);return new Uint8Array(c)},getExifArray:function(b){for(var a,c=0;c<b.length;c++)if(a=b[c],255===a[0]&225===a[1])return a;return[]},insertExif:function(b,a){var c=b.replace("data:image/jpeg;base64,",
""),d=this.decode64(c),e=d.indexOf(255,3),c=d.slice(0,e),d=d.slice(e),c=c.concat(a);return c=c.concat(d)},slice2Segments:function(b){for(var a=0,c=[];!(255===b[a]&218===b[a+1]);){if(255===b[a]&216===b[a+1])a+=2;else{var d=a+(256*b[a+2]+b[a+3])+2,a=b.slice(a,d);c.push(a);a=d}if(a>b.length)break}return c},decode64:function(b){var a,c,d="",e,h="",k=0,l=[];/[^A-Za-z0-9\+\/\=]/g.exec(b)&&console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding.");
b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");do a=this.KEY_STR.indexOf(b.charAt(k++)),c=this.KEY_STR.indexOf(b.charAt(k++)),e=this.KEY_STR.indexOf(b.charAt(k++)),h=this.KEY_STR.indexOf(b.charAt(k++)),a=a<<2|c>>4,c=(c&15)<<4|e>>2,d=(e&3)<<6|h,l.push(a),64!==e&&l.push(c),64!==h&&l.push(d);while(k<b.length);return l}}.restore(c,b)};return e}]);